(window.webpackJsonp=window.webpackJsonp||[]).push([["dynamic-table-dynamic-table","JSON-schema-form","dynamic-table-hooks","dynamic-table-hooks-useDragCol","dynamic-table-hooks-useDraggable","dynamic-table-hooks-useExpandLoading"],{"2dd3":function(e,t,n){},"5f73":function(e,t,n){"use strict";n.r(t);var o=n("5873");n.d(t,"SchemaForm",(function(){return o.default}))},"6c0e":function(e,t,n){"use strict";n.r(t);var o=n("5530"),r=(n("4de4"),n("7a23")),c=Object(r.withScopeId)("data-v-bb009452");Object(r.pushScopeId)("data-v-bb009452");var a=Object(r.createTextVNode)(" 您确定要删除吗？ ");Object(r.popScopeId)();var i,u=c((function(e,t,n,i,u,s){var l=Object(r.resolveComponent)("router-link"),d=Object(r.resolveComponent)("Option"),b=Object(r.resolveComponent)("a-select"),f=Object(r.resolveComponent)("a-button"),p=Object(r.resolveComponent)("a-popconfirm"),m=Object(r.resolveComponent)("a-table"),O=Object(r.resolveDirective)("permission");return Object(r.openBlock)(),Object(r.createBlock)(m,Object(r.mergeProps)({columns:e.columns,loading:e.loading,rowSelection:e.rowSelection,rowKey:e.rowKey,size:"middle","data-source":e.data,pagination:e.pageOption,bordered:"",customRow:e.customRow},Object(o.a)(Object(o.a)({},e.$props),e.$attrs),{onChange:e.paginationChange}),Object(r.createSlots)({_:2},[Object(r.renderList)(e.$slots,(function(t,n){return{name:n,fn:c((function(t){return[Object(r.renderSlot)(e.$slots,n,t,void 0,!0)]}))}})),Object(r.renderList)(e.columns.filter((function(e){return e.slots})),(function(t){return{name:t.slots.customRender,fn:c((function(n){return[e.$slots[t.slots.customRender]?Object(r.renderSlot)(e.$slots,t.slots.customRender,Object(r.mergeProps)({key:0},n),void 0,!0):(Object(r.openBlock)(),Object(r.createBlock)(r.Fragment,{key:1},["action"!==t.slots.customRender?(Object(r.openBlock)(),Object(r.createBlock)(r.Fragment,{key:0},["component"==t.slotsType?(Object(r.openBlock)(),Object(r.createBlock)(Object(r.resolveDynamicComponent)(t.slotsFunc(n.record)),{key:0})):Object(r.createCommentVNode)("",!0),"format"==t.slotsType?(Object(r.openBlock)(),Object(r.createBlock)(r.Fragment,{key:1},[Object(r.createTextVNode)(Object(r.toDisplayString)(t.slotsFunc(n.record[t.dataIndex||t.key],n.record)),1)],64)):Object(r.createCommentVNode)("",!0),"link"==t.slotsType?(Object(r.openBlock)(),Object(r.createBlock)(l,{key:2,to:t.linkPath+n.record[t.linkId]},{default:c((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(n.text),1)]})),_:2},1032,["to"])):Object(r.createCommentVNode)("",!0)],64)):Object(r.createCommentVNode)("",!0),"action"==t.slots.customRender?(Object(r.openBlock)(),Object(r.createBlock)("div",{key:t.slots.customRender,class:"actions"},[(Object(r.openBlock)(!0),Object(r.createBlock)(r.Fragment,null,Object(r.renderList)(e.actions,(function(t,i){return Object(r.openBlock)(),Object(r.createBlock)(r.Fragment,null,["select"==t.type?(Object(r.openBlock)(),Object(r.createBlock)(b,{key:i,value:n.record[t.key],"onUpdate:value":function(e){return n.record[t.key]=e},size:"small"},{default:c((function(){return[(Object(r.openBlock)(!0),Object(r.createBlock)(r.Fragment,null,Object(r.renderList)(t.options,(function(e){return Object(r.openBlock)(),Object(r.createBlock)(d,{key:e.value,value:e.value},{default:c((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(e.label),1)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["value","onUpdate:value"])):Object(r.createCommentVNode)("",!0),"button"==t.type?Object(r.withDirectives)((Object(r.openBlock)(),Object(r.createBlock)(f,Object(r.mergeProps)({key:1},Object(o.a)(Object(o.a)({},e.buttonProps),t.props),{key:i,onClick:function(o){return e.actionEvent(n.record,t.func)}}),{default:c((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(t.text),1)]})),_:2},1040,["onClick"])),[[O,t.permission]]):Object(r.createCommentVNode)("",!0),"popconfirm"==t.type?(Object(r.openBlock)(),Object(r.createBlock)(p,{key:i,placement:"leftTop",onConfirm:function(o){return e.actionEvent(n.record,t.func,"del")}},{title:c((function(){return[a]})),default:c((function(){return[Object(r.createVNode)(f,Object(o.a)(Object(o.a)({},e.buttonProps),t.props),{default:c((function(){return[Object(r.createTextVNode)(Object(r.toDisplayString)(t.text),1)]})),_:2},1040)]})),_:2},1032,["onConfirm"])):Object(r.createCommentVNode)("",!0)],64)})),256))])):Object(r.createCommentVNode)("",!0)],64))]}))}}))]),1040,["columns","loading","rowSelection","rowKey","data-source","pagination","customRow","onChange"])})),s=n("1da1"),l=n("ade3"),d=(n("2a26"),n("768f")),b=(n("2ef0"),n("9839")),f=(n("288f"),n("cdeb")),p=(n("c68a"),n("0020")),m=(n("96cf"),n("b0c0"),n("7db0"),n("d3b7"),n("7996")),O=n("9720"),j=Object(r.defineComponent)({name:"DynamicTable",inheritAttrs:!1,props:{columns:{type:Object},getListFunc:{type:Function},rowSelection:{type:Object},rowKey:{type:[String,Function]},pageOption:{type:Object,default:function(){return{}}}},components:(i={},Object(l.a)(i,p.a.name,p.a),Object(l.a)(i,f.a.name,f.a),Object(l.a)(i,b.b.name,b.b),Object(l.a)(i,d.a.name,d.a),Object(l.a)(i,"Option",b.b.Option),i),setup:function(e,t){t.attrs,t.emit,t.slots;var n,c=Object(m.b)().pageOption;Object(O.useDragCol)(e.columns);var a=Object(r.reactive)({expandItemRefs:{},customRow:function(){return{}},data:[],pageOption:Object.assign(c,e.pageOption),actions:(null===(n=e.columns.find((function(e){return"action"==(e.dataIndex||e.key)})))||void 0===n?void 0:n.actions)||[],loading:!1}),i=function(){var t=Object(s.a)(regeneratorRuntime.mark((function t(){var n,r,c,i,u,s,l=arguments;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=l.length>0&&void 0!==l[0]?l[0]:{},n=Object(o.a)(Object(o.a)({pageNumber:a.pageOption.current,pageSize:a.pageOption.pageSize},e.pageOption),n),a.loading=!0,t.next=5,e.getListFunc(n).finally((function(){return a.loading=!1}));case 5:r=t.sent,c=r.data,i=r.pageNumber,u=r.pageSize,s=r.total,Object.assign(a.pageOption,{current:~~i,pageSize:~~u,total:~~s}),a.data=c,a.customRow=Object(O.useDraggable)(a.data);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();i();var u=function(){var t=Object(s.a)(regeneratorRuntime.mark((function t(n,o,r){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o({record:n,props:e},(function(){return setTimeout((function(){return i()}))}));case 2:"del"==r&&a.data.length<2&&(a.pageOption.current=Math.max(1,a.pageOption.current-1));case 3:case"end":return t.stop()}}),t)})));return function(e,n,o){return t.apply(this,arguments)}}();return Object(o.a)(Object(o.a)({},Object(r.toRefs)(a)),{},{buttonProps:{size:"small"},actionEvent:u,refreshTableData:i,paginationChange:function(t,n,r){var c=r.field,u=r.order;a.pageOption=Object(o.a)(Object(o.a)({},a.pageOption),t),i(Object(o.a)(Object(o.a)(Object(o.a)({pageSize:t.pageSize,pageNumber:t.current},e.pageOption),n),{},{field:c,order:u}))}})}});n("f8c0"),j.render=u,j.__scopeId="data-v-bb009452",t.default=j},"76b3":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var o,r=n("5530"),c=n("7a23"),a=Object(c.withScopeId)("data-v-174458fe"),i=a((function(e,t,n,o,r,i){var u=Object(c.resolveComponent)("schema-form"),s=Object(c.resolveComponent)("a-modal");return Object(c.openBlock)(),Object(c.createBlock)(s,Object(c.mergeProps)({visible:e.visible,"onUpdate:visible":t[1]||(t[1]=function(t){return e.visible=t})},e.$attrs,{"confirm-loading":e.confirmLoading,afterClose:e.remove,onOk:e.onOk}),{default:a((function(){return[Object(c.createVNode)(u,{ref:"dynamicForm",fields:e.fields,"form-schema":e.dynamicValidateForm},null,8,["fields","form-schema"])]})),_:1},16,["visible","confirm-loading","afterClose","onOk"])})),u=n("1da1"),s=n("ade3"),l=(n("cd17"),n("ed3b")),d=(n("96cf"),n("b0c0"),n("159b"),n("7db0"),n("d3b7"),n("5f73")),b=Object(c.defineComponent)({name:"OperateModal",components:(o={},Object(s.a)(o,l.a.name,l.a),Object(s.a)(o,"SchemaForm",d.SchemaForm),o),props:{remove:{type:Function},formSchema:{type:Object,default:function(){return{}}},fields:{type:Object,default:function(){return{}}},hiddenFields:{type:Array,default:function(){return[]}},handleOk:{type:Function}},setup:function(e){var t=Object(c.ref)(null),n=Object(c.reactive)({visible:!0,confirmLoading:!1,dynamicValidateForm:e.formSchema});return e.hiddenFields.forEach((function(t){return n.dynamicValidateForm.formItem.find((function(e){return e.field==t})).hidden=!!e.fields})),Object(r.a)(Object(r.a)({},Object(c.toRefs)(n)),{},{onOk:function(){n.confirmLoading=!0,t.value.validate().then(function(){var o=Object(u.a)(regeneratorRuntime.mark((function o(r){return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(e.handleOk&&e.handleOk(t.value.modelRef,n)).finally((function(){return n.confirmLoading=!1}));case 2:n.visible=!1;case 3:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}()).catch((function(e){n.confirmLoading=!1}))},dynamicForm:t})}});b.render=i,b.__scopeId="data-v-174458fe";var f=b,p=function(e){var t,n=document.createElement("div");return t=Object(c.createVNode)(f,Object(r.a)(Object(r.a)({},e),{},{remove:function(){t=null,Object(c.render)(null,n),n.remove()}})),Object(c.render)(t,n),t}},"780e":function(e,t,n){"use strict";n.r(t),n.d(t,"useExpandLoading",(function(){return a}));var o=n("1da1"),r=(n("96cf"),n("d3b7"),n("7a23")),c=n("8fe6"),a=function(){var e=Object(o.a)(regeneratorRuntime.mark((function e(t){var n,a,i,u,s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.expanded,a=t.record,i=t.expandItemEl,u=t.asyncFunc,s=t.params,!n||!a.children||Array.isArray(a.children)){e.next=12;break}if(!i){e.next=11;break}return l=i.closest("td").querySelector(".ant-table-row-expand-icon"),Object(r.render)(Object(r.createVNode)(c.a),l),e.next=7,Object(r.nextTick)();case 7:return l.classList.add("loading-icon"),e.abrupt("return",u(s).finally(Object(o.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(r.render)(null,l),e.next=3,Object(r.nextTick)();case 3:l.classList.remove("loading-icon");case 4:case"end":return e.stop()}}),e)})))));case 11:return e.abrupt("return",u(s));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},7996:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return a})),n("1da1"),n("96cf"),n("d3b7");var o=n("7a23"),r=n("5530");function c(e){var t=Object(o.ref)(Object(r.a)({current:1,pageSize:10,total:0,pageSizeOptions:["10","20","30","40","50"],showQuickJumper:!0,showSizeChanger:!0,showTotal:function(e){return"共 ".concat(e," 条")},onChange:function(t,n){var o;return null==e||null===(o=e.pageChange)||void 0===o?void 0:o.call(e,t,n)},onShowSizeChange:function(t,n){var o;return null==e||null===(o=e.pageChange)||void 0===o?void 0:o.call(e,t,n)}},e));return{pageOption:t,updatePageOption:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(t.value,e)}}}n("76b3"),n("159b"),n("b64b"),n("b0c0");var a=function(e,t,n){var c,a=document.createElement("div"),i=function(){c=null,Object(o.render)(null,a),a.remove()};return(c=Object(o.createVNode)(e)).props=Object(o.mergeProps)(c.props,Object(r.a)({remove:i},t)),Object(o.render)(c,a),c.component.ctx.remove=i,c.component.ctx.$updateProps=function(e){e&&Object.keys(e).forEach((function(t){c.component.props[t]=e[t]}))},c.component.ctx}},9720:function(e,t,n){"use strict";n.r(t);var o=n("9bfe");n.d(t,"useDragCol",(function(){return o.useDragCol}));var r=n("ea2c");n.d(t,"useDraggable",(function(){return r.useDraggable}));var c=n("780e");n.d(t,"useExpandLoading",(function(){return c.useExpandLoading}))},"9bfe":function(e,t,n){"use strict";n.r(t),n.d(t,"useDragCol",(function(){return o})),n("159b");var o=function(e){var t,n,o,r,c=function(){return r.onmouseup=r.onmousedown=r.onmousemove=null};e.forEach((function(e){return e.customHeaderCell=function(e){return{onmouseenter:function(){var a,i;r=e.title[0].el.closest("th"),null!==(a=o)&&void 0!==a||(o=r.closest(".ant-table-wrapper")),null!==(i=n)&&void 0!==i||(n=o.clientWidth),r.onmousemove=function(e){e.offsetX>this.offsetWidth-10?this.style.cursor="col-resize":this.style.cursor="default",null==t&&(t=this),null!=t.mouseDown&&1==t.mouseDown&&(t.style.cursor="default",t.oldWidth+(e.x-t.oldX)>0&&(t.width=t.oldWidth+(e.x-t.oldX)),t.style.width=t.width,o.style.width=n+(e.x-t.oldX)+"px",t.style.cursor="col-resize")},r.onmousedown=function(e){t=this,e.offsetX>t.offsetWidth-10&&(t.mouseDown=!0,t.oldX=e.x,t.oldWidth=t.offsetWidth)},r.onmouseup=c,o.onmouseup=function(){c(),null==t&&(t=this),t.mouseDown=!1,t.style.cursor="default",n=o.clientWidth}},onmouseup:function(){return c}}}}))}},ea2c:function(e,t,n){"use strict";function o(e){var t,n;return function(o){return{draggable:!0,ondrag:function(e){t=o},ondrop:function(e){n=o},ondragend:function(o){if(t!==n){var r=e.indexOf(t),c=e.indexOf(n),a=[e[c],e[r]];e[r]=a[0],e[c]=a[1]}},ondragover:function(e){return!1}}}}n.r(t),n.d(t,"useDraggable",(function(){return o}))},f8c0:function(e,t,n){"use strict";n("2dd3")}}]);